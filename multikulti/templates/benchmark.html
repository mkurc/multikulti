{% extends "index.html" %}
{% block header %}
    <link rel="stylesheet" href="{{url_for('static', filename='css/jquery.dataTables.css')}}">
    <link rel="stylesheet" href="{{url_for('static', filename='css/dataTables.colVis.min.css')}}">
    <link rel="stylesheet" href="{{url_for('static', filename='css/dataTables.fixedHeader.min.css')}}">

{% endblock %}


{% block body %}
<div class="container-fluid">
    <div class="row">
        <div class="col-md-12">
            <h3>Benchmark set 
                <small>(download as a <a href="{{url_for('static', filename='tabelka.txt')}}"><i class='fa fa-download'></i> text data</a>)</small>
            </h3>
            <p>CABS-dock performance for 103 bound cases and 68 unbound cases (listed in rows) in 3 independent prediction runs (shown in separate columns). The table shows the lowest ligand-RMSD values (calculated on the peptide only after superimposition of the receptor structures) among: all 10,000 models (all), top 1000 models (top 1k, selected during filtering and clustering procedure), top 100 models (top 100, selected through further clustering) and top 10 final models (top 10). Last column shows the lowest RMSD values obtained in three prediction runs.</p>
            <p>Legend:
            <div style='font-weight:bold'>High-quality prediction: RMSD &lt; 3 Å</div>
            <div style='color:#333'>Medium-quality prediction: 3 Å ≤  RMSD ≤  5.5 Å </div>
            <div style='color:#777'>Low-quality prediction: RMSD &gt; 5.5 Å</div>
            <div><i class="fa fa-flask"></i> - link to the project</div>
            <div><i class="fa fa-external-link"></i> - link to the input structure (<span class='capi'>pdb</span>)</div>
            <div><i class="fa fa-close text-danger"></i> - bounded structure not found in the <span class='capi'>pdb</span></div>
            <h6>The RMSD is calculated on the peptide only, after superimposition of the receptor structures.  We’ve decided to set up an arbitrary cut-off of 5.5 Å (between low and medium accuracy models) on the basis of the work benchmarking the Rosetta FlexPepDock protocol for the refinement of coarse models of protein-peptide complexes (<a href="http://onlinelibrary.wiley.com/doi/10.1002/prot.22716/abstract">Raveh, B., London, N. and Schueler-Furman, O. (2010), Sub-angstrom modeling of complexes between flexible peptides and globular proteins. Proteins, 78: 2029–2040. doi: 10.1002/prot.22716</a>) . In that work, the authors defined an effective “basin of attraction” of 5.5 Å resolution, from which the FlexPepDock protocol is able to reliably recover near-native protein - peptide models (in 91% o f bound docking cases). Importantly, low-quality prediction (as defined by the 5.5 Å cut-off) doesn’t mean that the obtained models are useless for further refinement. In the FlexPepDock benchmark, starting the refinement from structures of 6.5 – 7.5 Å resolution resulted in near-native models in 48% of cases of bound docking (op. cit.).
            </h6>

            <table id="benchmarks" class="table hover compact order-column row-border dt-body-right dt-head-center" width="100%" cellspacing="0">
                <thead>
                    <tr>
                        <th colspan="2" class="dt-center">Input structures <span data-toggle="tooltip" rel='tooltip' data-placement="right" style="font-weight:normal" title="Links to the PDB Database"><i class="fa fa-info-circle"></i></span>
                        
                        </th>
                        <th rowspan="2">
                            <span data-toggle="tooltip" rel='tooltip' data-placement="right" style="font-weight:normal" title="Link to the project"><i class="fa fa-info-circle"></i></span>
                        </th>
                        <th colspan="4" class="dt-center">Bound, run 1</th>
                        <th rowspan="2"><span data-toggle="tooltip" rel='tooltip' data-placement="right" style="font-weight:normal" title="Link to the project"><i class="fa fa-info-circle"></i></span></th>
                        <th colspan="4" class="dt-center">Bound, run 2</th>
                        <th rowspan="2"><span data-toggle="tooltip" rel='tooltip' data-placement="right" style="font-weight:normal" title="Link to the project"><i class="fa fa-info-circle"></i></span></th>
                        <th colspan="4" class="dt-center">Bound, run 3</th>
                        <th colspan="4" class="dt-center">Bound, best results</th>
                        <th rowspan="2"><span data-toggle="tooltip" rel='tooltip' data-placement="right" style="font-weight:normal" title="Link to the project"><i class="fa fa-info-circle"></i></span></th>
                        <th colspan="4" class="dt-center">Unbound, run 1</th>
                        <th rowspan="2"><span data-toggle="tooltip" rel='tooltip' data-placement="right" style="font-weight:normal" title="Link to the project"><i class="fa fa-info-circle"></i></span></th>
                        <th colspan="4" class="dt-center">Unbound, run 2</th>
                        <th rowspan="2"><span data-toggle="tooltip" rel='tooltip' data-placement="right" style="font-weight:normal" title="Link to the project"><i class="fa fa-info-circle"></i></span></th>
                        <th colspan="4" class="dt-center">Unbound, run 3</th>
                        <th colspan="4" class="dt-center">Unbound, best results</th>
                        <th colspan="3" class="dt-center">Length</th>
                    </tr>
                    <tr>
                        <th>bound</th>
                        <th>unbound</th>
                        <th>10k</th>
                        <th>1k</th>
                        <th>100</th>
                        <th>10</th>
                        <th>10k</th>
                        <th>1k</th>
                        <th>100</th>
                        <th>10</th>
                        <th>10k</th>
                        <th>1k</th>
                        <th>100</th>
                        <th>10</th>
                        <th>10k</th>
                        <th>1k</th>
                        <th>100</th>
                        <th>10</th>
                        <th>10k</th>
                        <th>1k</th>
                        <th>100</th>
                        <th>10</th>
                        <th>10k</th>
                        <th>1k</th>
                        <th>100</th>
                        <th>10</th>
                        <th>10k</th>
                        <th>1k</th>
                        <th>100</th>
                        <th>10</th>
                        <th>10k</th>
                        <th>1k</th>
                        <th>100</th>
                        <th>10</th>
                        <th>bound</th>
                        <th>ligand</th>
                        <th>unbound</th>
                    </tr>
                </thead>
                <tbody>
                    {{table|safe}}
                </tbody>
            </table>

        </div>
    </div>
</div>
{% endblock %}
{%block below_js%}
<script src="{{url_for('static', filename='js/jquery.dataTables.min.js')}}"></script>
<script src="{{url_for('static', filename='js/dataTables.bootstrap.js')}}"></script>
<script src="{{url_for('static', filename='js/dataTables.colVis.min.js')}}"></script> 
<script src="{{url_for('static', filename='js/dataTables.fixedHeader.min.js')}}"></script> 
<script>
function isFloat(n) {
        return n === +n && n !== (n|0);
}
$(document).ready(function() {
    $("[rel=tooltip]").tooltip();

    var b = $('#benchmarks').dataTable({
        responsive: true,
        paging: false,
        searching: false,
        "order": [[17,'asc']],
        "dom": 'C<"clear">lfrtip',
        "columnDefs": [ {
                "targets": "_all",
                    "createdCell": function (td, cellData, rowData, row, col) {
                        if ( cellData < 3 ) {
                            $(td).css('font-weight', 'bold')
                        } else if (cellData <=5.5) 
                        {
                            $(td).css('color', '#333')
                        } else {
                            $(td).css('color', '#777')
                        }
                    }
                  } ]
    });
    var fh = new $.fn.dataTable.FixedHeader(b, {"offsetTop": 50});

} );
</script>
{% endblock %}

