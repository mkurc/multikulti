{% from 'macros.html' import render_field %} {% from 'macros.html' import render_checkbox_field %}<!doctype html>
<html lang='en'>
<head>
<meta charset="utf-8">
<link rel="shortcut icon" type="image/svg+xml" href="{{url_for('static', filename='img/CABSdock.svg')}}">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="CABS-dock treats peptide backbone as fully flexible, while the flexibility of receptor proteins is limited to near-native backbone fluctuations." />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        {% block indexuniq %}<title> CABSdock: server for protein-peptide docking</title>{% endblock %}
    <link rel="stylesheet" href="{{url_for('static', filename='css/font-awesome.min.css')}}">
    <link rel="stylesheet" href="{{url_for('static', filename='css/bootstrap.min.css')}}">
    <link rel="stylesheet" href="{{url_for('static', filename='css/bootstrap-theme.css')}}">
    <link rel="stylesheet" href="{{url_for('static', filename='css/my_custom.css')}}">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
    {% block header %}
    {% endblock %}
</head>
<body data-spy="scroll" data-target="#affix-nav">
<!-- Fixed navbar -->
<div class="navbar navbar-default navbar-static-top" role="navigation">
  <div class="container">
      <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
      </button>
    </div>
    <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-left">
              <li><a class="navbar-brand" href="{{url_for("index_page")}}"> <img width=25 class="img-responsive" src={{url_for('static',filename='img/CABSdock.svg')}}></a></li><li><a class="navbar-brand" href="{{url_for("index_page")}}"> CABSdock </a></li>
            <li><a href="{{url_for('index_page')}}"><i class="fa fa-cogs"></i> Submit new job</a></li>
            <li><a href="{{url_for('queue_page')}}"><i class="fa fa-reorder"></i> Queue</a></li>
    </ul>
            <form method="GET" action="{{url_for('queue_page')}}" class="navbar-form navbar-right" role="search">
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="project name search" name="q" id="q"> 
                </div>
            </form>
          <ul class="nav navbar-nav navbar-right">
              <li><a href="{{url_for('learn_more')}}"><i class="fa fa-cube"></i> About</a></li>
              <li><a href="{{url_for('tutorial')}}"><i class="fa fa-question-circle"></i> Tutorial</a></li>
              <li><a href="{{url_for('index_contact')}}"><i class="fa fa-envelope-o"></i> Contact</a></li>
          </ul>
    </div><!--/.nav-collapse -->
  </div>
</div>
<div class="container">
    <div class="row">
        <div class="col-md-12">
            {% with infos = get_flashed_messages(category_filter=["info"]) %}
            {% if infos %}
                    {% for message in infos %}
                        <div class="alert alert-info alert-dismissable">
                            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
                                <i class="fa fa-thumbs-o-up"></i> 
                                {{ message.decode('utf-8')|safe }}
                        </div>
                    {% endfor %}
            {% endif %}
            {% endwith %}

            {% with infos = get_flashed_messages(category_filter=["warning"]) %}
            {% if infos %}
                    {% for message in infos %}
                        <div class="alert  alert-warning alert-dismissable">
                            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
                                <i class="fa fa-bullhorn"></i> 
                                {{ message.decode('utf-8') }}
                        </div>
                    {% endfor %}
            {% endif %}
            {% endwith %}
            {% with errors = get_flashed_messages(category_filter=["error"]) %}
            {% if errors %}
                <div class="alert alert-danger alert-dismissable">
                    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
                        <i class="fa fa-exclamation-triangle"></i> <strong>Warning:</strong>
                        {% for message in errors %}
                            {{ message.decode('utf-8')|safe }}
                        {% endfor %}
                </div>
            {% endif %}
            {% endwith %}
        </div>
    </div>
</div>

{% block body %}

<div class="container">
    <div class="row">
        <div class="col-md-7">
            <div class="jumbotron ">
                <h2><strong>CABSdock</strong><small> server for flexible protein-peptide docking</small></h2>
                <div class="row">

                    <div class="col-md-4">
                        <img class="img-responsive" style="height:100%" src={{url_for('static',filename='img/CABSdock.svg')}}>
                    </div>
                    <div class="col-md-8">
                <p> 
                Given a protein receptor structure and a peptide sequence, CABS-dock
                performs docking search for the binding site allowing for full flexibility
                of the peptide and small fluctuations of the receptor backbone.

                </p>

        <p><a href="{{url_for('learn_more')}}" class="btn btn-primary btn-lg" role="button">Learn more »</a></p>
                    </div>
                </div>
            </div>
				<div class="panel panel-default">
                            <table class="table">
                                <tr>
                                    <td>

                                <i class="fa fa-edit fa-4x" style="padding:15px"></i> 
                                    </td>
                                    <td style="padding:20px">
                                        Mateusz Kurciński, Michal Jamroz, Maciej Blaszczyk, Andrzej Kolinski, Sebastian Kmiecik, <strong>CABS-dock web server for flexible docking of peptides to proteins without prior knowledge of the binding site</strong>, Nucleic Acids Research, <i>submitted</i> (<a href="http://arxiv.org/abs/1503.02032v1">arXiv preprint arXiv:1503.02032v1</a>)
                                    </td>
                                </tr>
                            </table>
				</div>

        </div>
        <div class="col-md-5">
                <div class="panel panel-default ">
                    <div class="panel-body">
            <form  enctype="multipart/form-data" method="POST" action="{{url_for('index_page')}}">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        Protein
                    </div>
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-md-6">
                                {{render_field(form.pdb_receptor, placeholder='2IV9 or 2IV9:AB')}}
                            </div>
                            <div class="col-md-6">
                                    <div class="form-group {% if form.receptor_file.errors %}has-error{% endif %}">
                                        or <label for="{{ form.receptor_file.id }}" class="control-label">{{form.receptor_file.label}}</label>
                                        <br><input  data-filename-placement="inside" class="btn-primary" type=file title="Browse" id="{{ form.receptor_file.id }}" name="{{ form.receptor_file.id }}">
                                                                {% if form.receptor_file.errors %}
                                            {% for e in form.receptor_file.errors %}
                                                <p class="help-block">{{ e|safe }}</p>
                                            {% endfor %}
                                        {% endif %}
                                    </div>


                            </div>
                        </div>
                        <small class="text-muted">Max protein size: 500 residues</small>
                    </div>
                </div>

                <div class="panel panel-primary">
                    <div class="panel-heading">
                        Peptide
                    </div>
                    <div class="panel-body">
                        {{render_field(form.ligand_seq, placeholder='SFGDGFADF', style='text-transform:uppercase;', onkeyup="javascript:this.value=this.value.toUpperCase();")}}
                        <small class="text-muted">Peptide size: 4-30 residues</small>
            </div>
        </div>
<div class="panel-group" id="accordion">
  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
            Optional <i class="fa fa-caret-down"></i>
        </a>
      </h4>
    </div>
    <div id="collapseOne" class="panel-collapse collapse">
      <div class="panel-body">
                <div class="row">
                    <div class="col-md-6">
                        {{render_field(form.name, placeholder='Project name')}}
                    </div>
                    <div class="col-md-6">
                        {{render_field(form.email, placeholder='john@doe.com')}}
                    </div>
                </div>
                {{render_field(form.ligand_ss, placeholder='CCCCHHHHC', style='text-transform:uppercase;', onkeyup="javascript:this.value=this.value.toUpperCase();")}}
                {{render_checkbox_field(form.add_constraints)}}
                {{render_checkbox_field(form.excluding)}}
                {{render_field(form.length)}}
                {{render_checkbox_field(form.show)}}

      </div>
    </div>
  </div>
</div>
                {{form.jid}}
                {{form.csrf_token()}}
                <div class="row">
                    <div class="col-md-6">
                        <a href="#" onClick="exampleData()"  class="btn btn-default btn-xs">Load example</a>
                    </div>
                    <div class="col-md-3">
                        <h6>Server status
                        </h6>
                    </div>
                    <div class="col-md-3">
                        <h6> {{status|safe}} </h6>
                    </div>
                </div>


                <hr>
                    <input type="submit" class="btn btn-lg btn-block btn-success" value="Submit">
            </form>
        </div>
    </div>
</div>
    </div>
</div>

{% endblock %}
{% block footer %}
<div class="container">
    <div class="row">
        <div class="col-md-12">
    <small class="text-muted" style="float:right">Laboratory of Theory of Biopolymers 2015</small>
        </div>
    </div>
</div>
{% endblock %}
{%block jsdata %}
<script src="{{url_for('static', filename='js/jquery.js')}}"></script>
<script src="{{url_for('static', filename='js/bootstrap.min.js')}}"></script>
{%endblock %}

{%block below_js%}
<script src="{{url_for('static', filename='js/bootstrap.file-input.js')}}"></script>
<script type="text/javascript" charset="utf-8">
$('input[type=file]').bootstrapFileInput();
function exampleData() {
    $('#collapseOne').collapse();
    document.getElementById("name").value = "Docking project";
    document.getElementById("ligand_ss").value =  "CCCCHHHHC";
    document.getElementById("ligand_seq").value = "SFGDGFADF";
    document.getElementById("pdb_receptor").value = "2IV9:AB";
    var a = ["receptor_file", "show","name", "ligand_ss", "ligand_seq", "pdb_receptor"];
    for (var i=0; i<a.length;i++){
      //  document.getElementById(a[i]).readOnly = true;
    }
}
</script>
{%endblock%}



<!-- Piwik -->
<script type="text/javascript">
var _paq = _paq || [];
_paq.push(['trackPageView']);
_paq.push(['enableLinkTracking']);
(function() {
var u="//biocomp.chem.uw.edu.pl/s/";
_paq.push(['setTrackerUrl', u+'piwik.php']);
_paq.push(['setSiteId', 7]);
var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
})();
</script>
<noscript><p><img src="//biocomp.chem.uw.edu.pl/s/piwik.php?idsite=7" style="border:0;" alt="" /></p></noscript>
<!-- End Piwik Code -->


<body>
</html>
